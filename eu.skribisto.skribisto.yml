app-id: eu.skribisto.skribisto
runtime: org.kde.Platform
runtime-version: '5.15'
sdk: org.kde.Sdk
command: skribisto
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --filesystem=host
  - --device=dri
modules:

  - name: openjpeg2
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_INSTALL_LIBDIR=lib
    sources:
      - type: archive
        url: https://github.com/uclouvain/openjpeg/archive/v2.3.0.tar.gz
        sha256: 3dc787c1bb6023ba846c2a0d9b1f6e179f1cd255172bde9eb75b01f1e6c7d71a
        
  - name: sqlite3
    cmake: false
    config-opts:
      - --enable-threadsafe
      - --enable-threads-override-locks
    build-options:
      cflags: -DSQLITE_ENABLE_UNLOCK_NOTIFY=1
    sources:
      - type: archive
        url: http://sqlite.org/2018/sqlite-autoconf-3230100.tar.gz
        sha256: 92842b283e5e744eff5da29ed3c69391de7368fccc4d0ee6bf62490ce555ef25
        
  - name: skribisto
    buildsystem: cmake
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://github.com/jacquetc/skribisto/archive/v1.8.1-alpha.tar.gz
        sha256: 5c4ff319bfc911c1236707f6ff8ffd5e3767b3e02f963f10f54e243c929143ac
